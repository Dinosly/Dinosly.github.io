(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{182:function(t,a,s){"use strict";s.r(a);var n=s(6),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"三、深浅拷贝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、深浅拷贝"}},[t._v("#")]),t._v(" 三、深浅拷贝")]),t._v(" "),s("h1",{attrs:{id:"_1-简述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-简述"}},[t._v("#")]),t._v(" 1.简述")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("1.深/浅拷贝都是针对于引用类型而言\n2.深拷贝是真正的拷贝出一个新的引用对象\n3.浅拷贝是简单复制被拷贝对象的引用地址\n4.修改拷贝对象或者修改被拷贝对象，另一个都会随着改变\n")])])]),s("h1",{attrs:{id:"_2-深拷贝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-深拷贝"}},[t._v("#")]),t._v(" 2.深拷贝")]),t._v(" "),s("h2",{attrs:{id:"_2-1-什么是深拷贝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-什么是深拷贝"}},[t._v("#")]),t._v(" 2.1 什么是深拷贝")]),t._v(" "),s("ul",[s("li",[t._v("拷贝整个对象（包括值+引用地址）成一个全新的对象")])]),t._v(" "),s("h2",{attrs:{id:"_2-2-深拷贝的几种方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-深拷贝的几种方法"}},[t._v("#")]),t._v(" 2.2 深拷贝的几种方法")]),t._v(" "),s("h3",{attrs:{id:"_2-2-1-json-stringify-parse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-json-stringify-parse"}},[t._v("#")]),t._v(" 2.2.1 JSON.stringify/parse")]),t._v(" "),s("ul",[s("li",[t._v("json.stringify()\n"),s("ul",[s("li",[t._v("将JavaScript值转为json字符串")])])]),t._v(" "),s("li",[t._v("json.parse()\n"),s("ul",[s("li",[t._v("将json字符串转为json对象或者JavaScript值")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-2-2-递归遍历对象，拷贝每一个属性并赋值（简单版）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-递归遍历对象，拷贝每一个属性并赋值（简单版）"}},[t._v("#")]),t._v(" 2.2.2 递归遍历对象，拷贝每一个属性并赋值（简单版）")]),t._v(" "),s("p",[t._v("参考链接: "),s("a",{attrs:{href:"https://github.com/axuebin/articles/issues/20",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript基础心法——深浅拷贝\n"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("function deepClone(source){\n  const targetObj = source.constructor === Array ? [] : {}; // 判断复制的目标是数组还是对象\n  for(let keys in source){ // 遍历目标\n    if(source.hasOwnProperty(keys)){\n      if(source[keys] && typeof source[keys] === 'object'){ // 如果值是对象，就递归一下\n        targetObj[keys] = source[keys].constructor === Array ? [] : {};\n        targetObj[keys] = deepClone(source[keys]);\n      }else{ // 如果不是，就直接赋值\n        targetObj[keys] = source[keys];\n      }\n    } \n  }\n  return targetObj;\n}\n\nconst originObj = {a:'a',b:'b',c:[1,2,3],d:{dd:'dd'}};\nconst cloneObj = deepClone(originObj);\nconsole.log(cloneObj === originObj); // false\n\ncloneObj.a = 'aa';\ncloneObj.c = [1,1,1];\ncloneObj.d.dd = 'doubled';\n\nconsole.log(cloneObj); // {a:'aa',b:'b',c:[1,1,1],d:{dd:'doubled'}};\nconsole.log(originObj); // {a:'a',b:'b',c:[1,2,3],d:{dd:'dd'}};\n")])])]),s("h3",{attrs:{id:"_2-2-2-递归遍历对象，拷贝每一个属性并赋值（复杂版）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-递归遍历对象，拷贝每一个属性并赋值（复杂版）"}},[t._v("#")]),t._v(" 2.2.2 递归遍历对象，拷贝每一个属性并赋值（复杂版）")]),t._v(" "),s("ul",[s("li",[t._v("上面的方法会有很多问题，比如会出现循环引用情况下就报错，多个类型不能正确处理等情况，推荐参考下面这两个分析很详细")])]),t._v(" "),s("p",[t._v("参考链接: "),s("a",{attrs:{href:"http://47.98.159.95/my_blog/js-api/005.html#_1-%E7%AE%80%E6%98%93%E7%89%88%E5%8F%8A%E9%97%AE%E9%A2%98",target:"_blank",rel:"noopener noreferrer"}},[t._v("005：如何写一个完整的深拷贝？\n"),s("OutboundLink")],1),t._v("\n参考链接: "),s("a",{attrs:{href:"https://muyiy.cn/blog/4/4.1.html#%E4%B8%89%E3%80%81%E6%B7%B1%E6%8B%B7%E8%B4%9D%EF%BC%88deep-copy%EF%BC%89",target:"_blank",rel:"noopener noreferrer"}},[t._v("深浅拷贝原理\n"),s("OutboundLink")],1)]),t._v(" "),s("h1",{attrs:{id:"_3-浅拷贝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-浅拷贝"}},[t._v("#")]),t._v(" 3.浅拷贝")]),t._v(" "),s("h2",{attrs:{id:"_3-1-什么是浅拷贝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-什么是浅拷贝"}},[t._v("#")]),t._v(" 3.1 什么是浅拷贝")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("直接复制（ = 赋值操作即可）"),s("strong",[t._v("引用")]),t._v("给另一个对象")])]),t._v(" "),s("li",[s("p",[t._v("修改一个对象，另一个对象也会改变（"),s("strong",[t._v("因为指向同一个内存地址，改变的自然是同一个对象")]),t._v("）")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  const originArray = [1,2,3,4,5];\n  const originObj = {a:'a',b:'b',c:[1,2,3],d:{dd:'dd'}};\n  const cloneArray = originArray;\n  const cloneObj = originObj;\n\n  console.log(cloneArray); // [1,2,3,4,5]\n  console.log(originObj); // {a:'a',b:'b',c:Array[3],d:{dd:'dd'}}\n  \n  cloneArray.push(6);\n  cloneObj.a = {aa:'aa'};\n  \n  console.log(cloneArray); // [1,2,3,4,5,6]\n  console.log(originArray); // [1,2,3,4,5,6]\n  \n  console.log(cloneObj); // {a:{aa:'aa'},b:'b',c:Array[3],d:{dd:'dd'}}\n  console.log(originArray); // {a:{aa:'aa'},b:'b',c:Array[3],d:{dd:'dd'}}\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_3-2-浅拷贝的几种方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-浅拷贝的几种方法"}},[t._v("#")]),t._v(" 3.2 浅拷贝的几种方法")]),t._v(" "),s("h3",{attrs:{id:"_3-2-1-直接-赋值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-直接-赋值"}},[t._v("#")]),t._v(" 3.2.1 直接"),s("code",[t._v("=")]),t._v("赋值")]),t._v(" "),s("ul",[s("li",[t._v("赋值操作其实本质上不涉及浅拷贝，因为是直接将一个对象的引用复制给另一个对象，因为指向同一个内存地址，肯定会互相影响")]),t._v(" "),s("li",[t._v("手工实现一种简单浅拷贝赋值（"),s("strong",[t._v("针对引用类型浅拷贝，基本数据类型无影响")]),t._v("）")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("simpleClone")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" objClone "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" prop "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tobjClone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" objClone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" obj\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-2-object-assign-target-source-（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-object-assign-target-source-（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[t._v("#")]),t._v(" 3.2.2 Object.assign(target,...source)（"),s("strong",[t._v("针对属性为引用类型浅拷贝，基本数据类型无影响")]),t._v("）")]),t._v(" "),s("h3",{attrs:{id:"_3-2-3-slice（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-slice（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[t._v("#")]),t._v(" 3.2.3 slice（"),s("strong",[t._v("针对属性为引用类型浅拷贝，基本数据类型无影响")]),t._v("）")]),t._v(" "),s("h3",{attrs:{id:"_3-2-4-es6-展开操作符（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-es6-展开操作符（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[t._v("#")]),t._v(" 3.2.4 ES6 ...展开操作符（"),s("strong",[t._v("针对属性为引用类型浅拷贝，基本数据类型无影响")]),t._v("）")]),t._v(" "),s("h3",{attrs:{id:"_3-2-5-array-concat（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-5-array-concat（针对属性为引用类型浅拷贝，基本数据类型无影响）"}},[t._v("#")]),t._v(" 3.2.5 array.concat（"),s("strong",[t._v("针对属性为引用类型浅拷贝，基本数据类型无影响")]),t._v("）")])])}),[],!1,null,null,null);a.default=r.exports}}]);